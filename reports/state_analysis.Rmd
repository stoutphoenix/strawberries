---
title: "state_analysis"
output: html_document
date: "2025-10-27"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# State Analysis

## Load Data
```{r cars, echo=FALSE}
pacman::p_load(readr)
df <- read_csv('combined_data.csv')

```


```{r}
pacman::p_load(ggplot2)
# 6. SHIPMENT VOLUME VS PRODUCTION (SCATTER PLOT) with California regression
ggplot(df, aes(x = production_tons_total / 1000, y = total_tonnage / 1000, 
               color = state, shape = state)) +
  geom_point(size = 4, alpha = 0.7) +
  geom_abline(slope = 1, intercept = 0, linetype = "dashed", alpha = 0.5) +
  geom_smooth(data = df %>% filter(state == "CALIFORNIA"), 
              method = "lm", 
              se = TRUE,  # Show confidence interval
              linetype = "solid",
              linewidth = 1) +
  labs(
    title = "Shipment Volume vs Production Volume",
    subtitle = "Points above line indicate shipments > production; California regression shown",
    x = "Production (1000s of tons)",
    y = "Refrigerated Truck Shipments (1000s of tons)",
    color = "State",
    shape = "State"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold"),
    legend.position = "bottom"
  )

# Calculate the actual slopes and RÂ²
ca_model <- lm(total_tonnage ~ production_tons_total, 
               data = df %>% filter(state == "CALIFORNIA"))
fl_model <- lm(total_tonnage ~ production_tons_total, 
               data = df %>% filter(state == "FLORIDA"))

# Extract slope
ca_slope <- coef(ca_model)[2]
fl_slope <- coef(fl_model)[2]

print(paste("California slope:", round(ca_slope, 3)))
print(paste("Florida slope:", round(fl_slope, 3)))
```
**Key Findings:**

- **Production scale**: California's strawberry production substantially exceeds Florida's
- **Market destination**: Florida allocates a higher proportion of production to fresh markets
- **Distribution patterns**: California exhibits market adaptation as production scales, with fresh shipments via refrigerated trucks growing at only 0.507 tons per ton of production increase

This divergence suggests California's production increasingly serves processed markets, utilizes alternative distribution channels, or employs strategic storage to balance seasonal supply fluctuations.


